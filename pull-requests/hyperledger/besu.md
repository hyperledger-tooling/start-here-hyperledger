---
layout: default
title: besu
parent: Hyperledger
grand_parent: Pull Requests
has_children: false
permalink: /pull-requests/hyperledger/besu
---

# besu <span class="fs-3 right-align">[GitHub](https://github.com/hyperledger/besu){: .btn .mr-4 }</span>


<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/3392" class=".btn">#3392</a>
            </td>
            <td>
                <b>
                    Merge: add terminal block number and hash to genesis config options
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                Ported from the merge branch.

Signed-off-by: Fabio Di Fabio <fabio.difabio@consensys.net>

<!-- Thanks for sending a pull request! Please check out our contribution guidelines: -->
<!-- https://github.com/hyperledger/besu/blob/main/CONTRIBUTING.md -->

## PR description

## Fixed Issue(s)
<!-- Please link to fixed issue(s) here using format: fixes #<issue number> -->
<!-- Example: "fixes #2" -->

## Changelog

- [ ] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2022-02-08 17:40:59 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/3391" class=".btn">#3391</a>
            </td>
            <td>
                <b>
                    MERGE: new payload API for Kiln testnet
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                <!-- Thanks for sending a pull request! Please check out our contribution guidelines: -->
<!-- https://github.com/hyperledger/besu/blob/main/CONTRIBUTING.md -->

## PR description

## Fixed Issue(s)
<!-- Please link to fixed issue(s) here using format: fixes #<issue number> -->
<!-- Example: "fixes #2" -->

## Changelog

- [ ] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2022-02-08 15:11:50 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/3390" class=".btn">#3390</a>
            </td>
            <td>
                <b>
                    Fix for forkId NPE.
                </b>
            </td>
        </tr>
        <tr>
            <td>
                <span class="chip">TeamRevenant</span>
            </td>
            <td>
                Signed-off-by: Mark Terry <mark.terry@consensys.net>

<!-- Thanks for sending a pull request! Please check out our contribution guidelines: -->
<!-- https://github.com/hyperledger/besu/blob/main/CONTRIBUTING.md -->

## PR description
Fix for the case where an NPE is generated using legacy mode without non-zero milestone blocks.

## Fixed Issue(s)
Fixes #3343 
<!-- Please link to fixed issue(s) here using format: fixes #<issue number> -->
<!-- Example: "fixes #2" -->

## Changelog

- [x] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2022-02-08 14:01:24 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/3386" class=".btn">#3386</a>
            </td>
            <td>
                <b>
                    add a websocket max frame size configuration
                </b>
            </td>
        </tr>
        <tr>
            <td>
                <span class="chip">documentation</span>
            </td>
            <td>
                
## PR description
merge to main of this config and default from the original [pr against the merge branch](https://github.com/hyperledger/besu/pull/3379)

## Fixed Issue(s)
<!-- Please link to fixed issue(s) here using format: fixes #<issue number> -->
<!-- Example: "fixes #2" -->
fixes #3368 

## Changelog

- [X] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2022-02-07 19:47:08 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/3384" class=".btn">#3384</a>
            </td>
            <td>
                <b>
                    refactor MergeCoordinator executeBlock to return validation reason
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                <!-- Thanks for sending a pull request! Please check out our contribution guidelines: -->
<!-- https://github.com/hyperledger/besu/blob/main/CONTRIBUTING.md -->

## PR description

## Fixed Issue(s)
<!-- Please link to fixed issue(s) here using format: fixes #<issue number> -->
<!-- Example: "fixes #2" -->
fixes #3145 
## Changelog

- [ ] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2022-02-07 18:14:24 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/3383" class=".btn">#3383</a>
            </td>
            <td>
                <b>
                    Change map key in eth peers
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                Trying to fix multiple connections to the same peer by using the peer id as the key to the map

            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2022-02-07 04:58:13 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/3382" class=".btn">#3382</a>
            </td>
            <td>
                <b>
                    Allow optional API methods with no authentication
                </b>
            </td>
        </tr>
        <tr>
            <td>
                <span class="chip">enhancement</span>
            </td>
            <td>
                <!-- Thanks for sending a pull request! Please check out our contribution guidelines: -->
<!-- https://github.com/hyperledger/besu/blob/main/CONTRIBUTING.md -->

## PR description
Adds no auth api methods start up option for some api methods to require no authentication when RPC is configured with authentication

## Fixed Issue(s)
<!-- Please link to fixed issue(s) here using format: fixes #<issue number> -->
<!-- Example: "fixes #2" -->
fixes #2474

## Changelog

- [ ] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2022-02-07 03:15:47 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/3380" class=".btn">#3380</a>
            </td>
            <td>
                <b>
                    Implement secure HTTPS communication. 
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                Consider using latest TLSv1.2 instead of TLS.

Signed-off-by : Bhaskar <bhaskarvilles@yandex.com>
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2022-02-06 04:04:01 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/3379" class=".btn">#3379</a>
            </td>
            <td>
                <b>
                    add a websocket max frame size configuration 
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                <!-- Thanks for sending a pull request! Please check out our contribution guidelines: -->
<!-- https://github.com/hyperledger/besu/blob/main/CONTRIBUTING.md -->

## PR description
when interoping with nimbus, besu will disconnect when it receives a message with a frame size exceeding 64kb.  The default max frame size for vertx websocket implementation is 64kb, but the [websocket lib](https://github.com/Tormund/news) used by nimbus has a [static 1mb frame size](https://github.com/Tormund/news/blob/master/src/news.nim#L423).

Increasing the max frame size should not affect existing websocket client usage.  We may want to move this configuration to the execution-specific websocket endpoint (on 8551) once besu implements it in #3378.

this PR:
* bumps the default websocket max frame size to 1mb
* perpetuates the vertx default websocket max message size of (max_frame_size * 4)
* plumbs a cli option to enable using an explicit max frame size

## Fixed Issue(s)
<!-- Please link to fixed issue(s) here using format: fixes #<issue number> -->
<!-- Example: "fixes #2" -->
fixes #3368
relates to https://github.com/status-im/nimbus-eth2/issues/3305

## Changelog

- [ ] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2022-02-05 03:10:21 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/3376" class=".btn">#3376</a>
            </td>
            <td>
                <b>
                    Add block details to finalization validation warning
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                <!-- Thanks for sending a pull request! Please check out our contribution guidelines: -->
<!-- https://github.com/hyperledger/besu/blob/main/CONTRIBUTING.md -->

## PR description
add block details to MergeUnfinalizedValidationRule header validation rule

## Fixed Issue(s)
<!-- Please link to fixed issue(s) here using format: fixes #<issue number> -->
<!-- Example: "fixes #2" -->
#3375
## Changelog

- [ ] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2022-02-04 20:14:26 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/3372" class=".btn">#3372</a>
            </td>
            <td>
                <b>
                    Persist last finalized block hash
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                Signed-off-by: Fabio Di Fabio <fabio.difabio@consensys.net>

<!-- Thanks for sending a pull request! Please check out our contribution guidelines: -->
<!-- https://github.com/hyperledger/besu/blob/main/CONTRIBUTING.md -->

## PR description

## Fixed Issue(s)
<!-- Please link to fixed issue(s) here using format: fixes #<issue number> -->
<!-- Example: "fixes #2" -->
fixes #2913 
## Changelog

- [ ] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2022-02-03 11:30:24 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/3371" class=".btn">#3371</a>
            </td>
            <td>
                <b>
                    Add missing tests for JwtAlgorithm
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                Signed-off-by: Frank Li <b439988l@gmail.com>

<!-- Thanks for sending a pull request! Please check out our contribution guidelines: -->
<!-- https://github.com/hyperledger/besu/blob/main/CONTRIBUTING.md -->

## PR description
I realised as I'm working on some other authentication stuff for RPC that I've missed some opportunities for tests as part of  https://github.com/hyperledger/besu/pull/3017
This pr adds them in

## Changelog

- [ ] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2022-02-03 06:12:59 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/3370" class=".btn">#3370</a>
            </td>
            <td>
                <b>
                    fixed method name and some 'finals'
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                Some minor changes

Signed-off-by: Stefan Pingel <stefan.pingel@consensys.net>

            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2022-02-03 05:58:15 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/3367" class=".btn">#3367</a>
            </td>
            <td>
                <b>
                    Addressing SonarCloud code smells
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                ## PR description:
Resolving code smells in SonarCloud

## Fixed Issue(s)
- https://sonarcloud.io/project/issues?id=hyperledger_besu&open=AXx2E1OZws9Ez90CDXF2&resolved=false
- https://sonarcloud.io/project/issues?fileUuids=AXx2Exrfws9Ez90CDWNF&id=hyperledger_besu&open=AXx2E1OZws9Ez90CDXFz&resolved=false
- https://sonarcloud.io/project/issues?id=hyperledger_besu&open=AXx2E1Olws9Ez90CDXF4&resolved=false
- https://sonarcloud.io/project/issues?fileUuids=AXx2Exrfws9Ez90CDWNH&id=hyperledger_besu&open=AXx2E1Olws9Ez90CDXF3&resolved=false

## Changelog
- Using .parseInt instead of valueOf within the Integer class for both ExpectNetServicesReturnsAllServicesAsActive and ExpectNetServicesReturnsOnlyJsonRpcActive
- Defining a constant to store the "jsonrpc" string instead of duplicating the string literal multiple times across both classes


            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2022-02-02 23:58:53 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/3364" class=".btn">#3364</a>
            </td>
            <td>
                <b>
                    findSyncTarget always called with Optional.empty
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                Signed-off-by: Jiri Peinlich <jiri.peinlich@gmail.com>

            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2022-02-02 15:09:39 +0000 UTC
    </div>
</div>

