---
layout: default
title: besu
parent: Hyperledger
grand_parent: Pull Requests
has_children: false
permalink: /pull-requests/hyperledger/besu
---

# besu <span class="fs-3 right-align">[GitHub](https://github.com/hyperledger/besu){: .btn .mr-4 }</span>


<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/2992" class=".btn">#2992</a>
            </td>
            <td>
                <b>
                    Update bls12-381 native library
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                Signed-off-by: Daniel Lehrner <daniel.lehrner@consensys.net>

<!-- Thanks for sending a pull request! Please check out our contribution guidelines: -->
<!-- https://github.com/hyperledger/besu/blob/main/CONTRIBUTING.md -->

## PR description
The native library for bls12-381 is updated to the latest version to add support for M1 (ARM) processors.
 
## Fixed Issue(s)
Fixes #2668 

## Changelog

- [x ] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2021-11-03 11:41:07 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/2989" class=".btn">#2989</a>
            </td>
            <td>
                <b>
                    Add 21.10.0 release changes to main
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                Signed-off-by: garyschulte <garyschulte@gmail.com>

<!-- Thanks for sending a pull request! Please check out our contribution guidelines: -->
<!-- https://github.com/hyperledger/besu/blob/main/CONTRIBUTING.md -->

## PR description
Add 21.10.0 release changes from the release branch back to main
* update changelog to reflect the 21.10.0 release
* fix a bit of copypasta in retesteth chain params for the arrowGlacier definition

## Fixed Issue(s)
<!-- Please link to fixed issue(s) here using format: fixes #<issue number> -->
<!-- Example: "fixes #2" -->

## Changelog

- [ ] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2021-11-02 17:19:40 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/2988" class=".btn">#2988</a>
            </td>
            <td>
                <b>
                    removes transitive deps on slf4j impl
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                Signed-off-by: Justin Florentine <justin+github@florentine.us>

<!-- Thanks for sending a pull request! Please check out our contribution guidelines: -->
<!-- https://github.com/hyperledger/besu/blob/main/CONTRIBUTING.md -->

## PR description
Removes logback slf4j impl inherited from tuweni

## Fixed Issue(s)
<!-- Please link to fixed issue(s) here using format: fixes #<issue number> -->
<!-- Example: "fixes #2" -->
fixes #2800 
## Changelog

- [X] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2021-11-02 13:46:06 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/2986" class=".btn">#2986</a>
            </td>
            <td>
                <b>
                    [MINOR] Typos
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                typos

- [x] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2021-11-02 02:35:01 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/2985" class=".btn">#2985</a>
            </td>
            <td>
                <b>
                    Add Daniel as a maintainer
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                Signed-off-by: garyschulte <garyschulte@gmail.com>

<!-- Thanks for sending a pull request! Please check out our contribution guidelines: -->
<!-- https://github.com/hyperledger/besu/blob/main/CONTRIBUTING.md -->

## PR description

## Add Daniel Lehrner as a contributor/maintainer.  

Daniel has contributed to hyperledger/besu significantly at ioBuilders  while working on adding secp256R1 support into besu, and he has recently joined the besu mainnet team at Consensys.

Daniel has already made significant contributions to [besu](https://github.com/hyperledger/besu/commits?author=daniel-iobuilders) and [besu-native](https://github.com/hyperledger/besu-native/pulls?q=is%3Apr+author%3Adaniel-iobuilders+), this PR proposes to add him as a maintainer.


https://github.com/hyperledger/besu/pull/2630
https://github.com/hyperledger/besu/pull/2321
https://github.com/hyperledger/besu/pull/2183
https://github.com/hyperledger/besu/pull/2163
https://github.com/hyperledger/besu/pull/2066
https://github.com/hyperledger/besu/pull/2036
https://github.com/hyperledger/besu/pull/2008
https://github.com/hyperledger/besu/pull/1933
https://github.com/hyperledger/besu-native/pull/48
https://github.com/hyperledger/besu-native/pull/45
https://github.com/hyperledger/besu-native/pull/39
https://github.com/hyperledger/besu-native/pull/38

## Vote
Voting ends 2 weeks from the publication of this PR or once a majority of the maintainers [vote](https://github.com/hyperledger/besu/blob/master/MAINTAINERS.md#maintainers-approval-process).  

For more information on this process see the Becoming a Maintainer section in the MAINTAINERS.md file.

            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2021-11-01 23:11:01 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/2984" class=".btn">#2984</a>
            </td>
            <td>
                <b>
                    Release 21.10.0
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                <nil>
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2021-11-01 22:00:48 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/2983" class=".btn">#2983</a>
            </td>
            <td>
                <b>
                    Quarterly release branch update and cherry-pick
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                Signed-off-by: garyschulte <garyschulte@gmail.com>

<!-- Thanks for sending a pull request! Please check out our contribution guidelines: -->
<!-- https://github.com/hyperledger/besu/blob/main/CONTRIBUTING.md -->

## PR description
Quarterly release for 21.10.0.  In addition to the cumulative release candidates (RC1, RC2, RC3, RC4):

* cherry-pick merge of arrow-glacier
* update CHANGELOG.md for quarterly release

## Fixed Issue(s)
<!-- Please link to fixed issue(s) here using format: fixes #<issue number> -->
<!-- Example: "fixes #2" -->

## Changelog

- [ ] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2021-11-01 20:38:41 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/2980" class=".btn">#2980</a>
            </td>
            <td>
                <b>
                    [2950] Support websocket binary frames 
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                Signed-off-by: Frank Li <b439988l@gmail.com>

<!-- Thanks for sending a pull request! Please check out our contribution guidelines: -->
<!-- https://github.com/hyperledger/besu/blob/main/CONTRIBUTING.md -->

## PR description

## Fixed Issue(s)
<!-- Please link to fixed issue(s) here using format: fixes #<issue number> -->
<!-- Example: "fixes #2" -->

fixes https://github.com/hyperledger/besu/issues/2950

## Changelog

- Failing test for sending a binary frame to websocketservice
- Add support

- [x] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2021-11-01 05:41:16 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/2979" class=".btn">#2979</a>
            </td>
            <td>
                <b>
                    Improve ValidatorContractController result validation
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                ## PR description

Add an extra check to ensure that a successful contract call with an empty result configures an error, as we never expect the validator contract to return an empty list of validators.

This is important because of the way that contract call works. It is possible to call an address that does not have a  contract deployed, and still get a successful call with an empty result.

## Fixed Issue(s)
fixes #2900

## Changelog

- [x] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2021-10-31 21:30:27 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/2978" class=".btn">#2978</a>
            </td>
            <td>
                <b>
                    Feature/arrow glacier
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                <!-- Thanks for sending a pull request! Please check out our contribution guidelines: -->
<!-- https://github.com/hyperledger/besu/blob/main/CONTRIBUTING.md -->

## PR description
Implement arrowGlacier hardfork EIP-4345.  

Upstream reference tests do not yet exist for arrowGlacier, but we can add them once they exist upstream, see #2977

## Fixed Issue(s)
<!-- Please link to fixed issue(s) here using format: fixes #<issue number> -->
<!-- Example: "fixes #2" -->
fixes #2943 

## Changelog

- [X] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2021-10-29 20:09:49 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/2976" class=".btn">#2976</a>
            </td>
            <td>
                <b>
                    consensus context changes in support of merge context
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                <!-- Thanks for sending a pull request! Please check out our contribution guidelines: -->
<!-- https://github.com/hyperledger/besu/blob/main/CONTRIBUTING.md -->

## PR description

Incremental merge of `merge-branch` from amphora hackathon.  

This pr does not include MergeContext, TransitionContext or PostMergeContext, but makes changes in support of consensus context polymorphism within a single protocol schedule (one consensus type pre-merge, one type post)

highlights:
* largely just a search/replace of the various consensus context usages
* consensus context objects implement  ConsensusContext interface
* rename protocolContext consensusState -> consensusContext to match implementation names


## Fixed Issue(s)
<!-- Please link to fixed issue(s) here using format: fixes #<issue number> -->
<!-- Example: "fixes #2" -->
fixes #2964

## Changelog

- [ ] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2021-10-29 03:40:19 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/2975" class=".btn">#2975</a>
            </td>
            <td>
                <b>
                    [WIP] draft merge 
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                <!-- Thanks for sending a pull request! Please check out our contribution guidelines: -->
<!-- https://github.com/hyperledger/besu/blob/main/CONTRIBUTING.md -->

## PR description

## Fixed Issue(s)
<!-- Please link to fixed issue(s) here using format: fixes #<issue number> -->
<!-- Example: "fixes #2" -->

## Changelog

- [ ] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2021-10-29 01:06:52 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/2973" class=".btn">#2973</a>
            </td>
            <td>
                <b>
                    Prepare for version 21.10.0-RC5-SNAPSHOT
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                <nil>
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2021-10-28 18:25:10 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/2972" class=".btn">#2972</a>
            </td>
            <td>
                <b>
                    Release 21.10.0-RC4
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                <nil>
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2021-10-28 17:56:31 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/2971" class=".btn">#2971</a>
            </td>
            <td>
                <b>
                    Refactor privacy controller
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                Cleanup of PrivacyController class.
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2021-10-28 07:33:23 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/2970" class=".btn">#2970</a>
            </td>
            <td>
                <b>
                    [2883] log nicer warnings when runtime isn't configured for ipv6
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                <!-- Thanks for sending a pull request! Please check out our contribution guidelines: -->
<!-- https://github.com/hyperledger/besu/blob/main/CONTRIBUTING.md -->

## PR description

See attached issue for more detailed description from the user's perspective. This exception is caused by the runtime not supporting ipv6 outbound traffic (docker by default doesn't), and the full stacktrace is not helpful and spammy. This PR makes the log TRACE level so users will need to specifically toggle to see the full trace.

Step 2 is to update our troubleshooting doc in besu-docs to include ipv6 related query.

Step 3 is to potentially update our quick start guide to include instructions on how to turn on ipv6 in docker

Step 4 (maybe) is to rewrite how PeerDiscoveryAgent is used, and maybe verify ipv6 connectivity and filter our ipv6 peers.

Step 2,3,4 and this PR are not dependent on each other.

## Fixed Issue(s)
<!-- Please link to fixed issue(s) here using format: fixes #<issue number> -->
<!-- Example: "fixes #2" -->
https://github.com/hyperledger/besu/issues/2883

## Changelog
Catching `UnsupportedAddressTypeException` which are caused by runtime not having ipv6 support and display a nice error message rather than half a page long of unhelpful stacktrace

- [x] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2021-10-28 05:52:48 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/2969" class=".btn">#2969</a>
            </td>
            <td>
                <b>
                    Private transaction nonce management improvement: PMT pool
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                Added a "PMT Pool" to keep track of pending private transactions, so these can be factored into private nonce management.

## Changelog

- [ ] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2021-10-28 05:23:58 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/2968" class=".btn">#2968</a>
            </td>
            <td>
                <b>
                    iterative merge: Initial plumbing for merge subproject
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                Signed-off-by: garyschulte <garyschulte@gmail.com>

<!-- Thanks for sending a pull request! Please check out our contribution guidelines: -->
<!-- https://github.com/hyperledger/besu/blob/main/CONTRIBUTING.md -->

## PR description
This is step one of an iterative merge of the amphora feature branch into main.

highlights include:
* gradle subproject for merge
* cli option
* genesis file config optional for terminal total difficulty


## Fixed Issue(s)
<!-- Please link to fixed issue(s) here using format: fixes #<issue number> -->
<!-- Example: "fixes #2" -->
fixes #2966

## Changelog

- [X] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2021-10-27 21:50:45 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/2967" class=".btn">#2967</a>
            </td>
            <td>
                <b>
                    [#2953] Fix loop exit condition for BonsaiWorldStateArchive
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                Signed-off-by: Diego López León <dieguitoll@gmail.com>

## PR description
Fixes the exit condition for loading a `BonsaiPersistedWorldState` for a sibling block of the last one persisted

## Fixed Issue(s)
fixes #2953

## Changelog

- [x] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2021-10-27 21:07:59 +0000 UTC
    </div>
</div>

<div>
    <table>
        <tr>
            <td>
                PR <a href="https://github.com/hyperledger/besu/pull/2962" class=".btn">#2962</a>
            </td>
            <td>
                <b>
                    2936 debug docker build
                </b>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                <!-- Thanks for sending a pull request! Please check out our contribution guidelines: -->
<!-- https://github.com/hyperledger/besu/blob/main/CONTRIBUTING.md -->

## PR description
Adds a debug profile, and updates the latest profile to openjdk-17

## Fixed Issue(s)
fixes #2936 

## Changelog

- [X] I thought about the changelog and included a [changelog update if required](https://wiki.hyperledger.org/display/BESU/Changelog).
            </td>
        </tr>
    </table>
    <div class="right-align">
        Created At 2021-10-27 18:37:23 +0000 UTC
    </div>
</div>

